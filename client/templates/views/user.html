<ng-switch on="new_user">
	<h2 ng-switch-when="true">Registering new user</h2>
	<h2 ng-switch-when="false">Modifying existing user</h2>
</ng-switch>

<div ng-include="NOTIFICATION_ALERT_PATH"></div>

<form name="userForm" class="form-horizontal" role="form" novalidate>
	<div class="form-group">
		<label class="control-label col-sm-2" for="name">Name:</label>
		<div class="col-sm-10">
			<input id="name" type="text" class="form-control" required ng-model="user.name">
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-sm-2" for="last-name">Last Name:</label>
		<div class="col-sm-10">
			<input id="last-name" type="text" class="form-control" required ng-model="user.last_name">
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-sm-2" for="email">Email:</label>
		<div class="col-sm-10">
			<input id="email" type="email" class="form-control" required ng-model="user.email">
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-sm-2" for="profile">Profile:</label>
		<div class="col-sm-10">
			<select id="profile" class="form-control" required ng-model="user.profile_id"
					ng-options="profile.id as profile.name for profile in profiles">
			</select>
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-sm-2" for="holding">Holding:</label>
		<div class="col-sm-10">
			<select id="holding" class="form-control" required ng-model="user.holding_id"
					ng-options="holding.id as holding.name for holding in holdings">
			</select>
		</div>
	</div>
	<a class="col-sm-offset-2 btn btn-link" href="#" role="button"
			ng-hide="new_user || changing_password" ng-click="changing_password=true">Change password</a>
	<div ng-show="new_user || changing_password">
		<div class="form-group" ng-hide="new_user">
			<label class="control-label col-sm-2" for="previous_password">Previous Password:</label>
			<div class="col-sm-10">
				<input id="previous_password" type="password" class="form-control" required ng-model="user.previous_password">
			</div>
		</div>
		<div class="form-group">
			<label class="control-label col-sm-2" for="password">Password:</label>
			<div class="col-sm-10">
				<input id="password" type="password" class="form-control" required ng-model="user.password">
			</div>
		</div>
		<div class="form-group">
			<label class="control-label col-sm-2" for="confirm_password">Confirm Password:</label>
			<div class="col-sm-10">
				<input id="confirm_password" type="password" class="form-control" required ng-model="user.confirm_password">
			</div>
		</div>
	</div>

	<div class="form-group col-sm-12"></div>

	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-10">
			<button type="submit" class="btn btn-primary" ng-click="save()">Save</button>
			<button type="button" class="btn btn-danger" ng-click="delete()"
					ng-if="undeletable">Delete</button>
			<button type="button" class="btn btn-default" ng-click="cancel()">Cancel</button>
		</div>
	</div>
</form>